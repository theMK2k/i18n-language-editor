(function(e){function t(t){for(var r,o,l=t[0],c=t[1],s=t[2],f=0,d=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/i18n-language-editor/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"363a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"readTextFileAsync",(function(){return m})),n.d(r,"flattenObject",(function(){return w}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("div",{staticClass:"d-flex align-center"},[e._v("i18n Language Editor")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:e.onReset}},[e._v("RESET ")])],1),n("v-main",[n("language-editor",{ref:"languageEditor"})],1)],1)},o=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e.workflow===e.enmWorkflow.LOADLANGUAGEFILE||e.workflow===e.enmWorkflow.LOADREFERENCEFILE?n("div",[e.workflow===e.enmWorkflow.LOADLANGUAGEFILE?n("h1",[e._v(" Step 1 of 3: Load the language file to be edited ")]):e._e(),e.workflow===e.enmWorkflow.LOADREFERENCEFILE?n("h1",[e._v(" Step 2 of 3: Load a reference language file if available ")]):e._e(),e.workflow===e.enmWorkflow.LOADREFERENCEFILE?n("p",[e._v(" The reference language file is optional. ")]):e._e(),n("file-drop",{ref:"fileDrop",attrs:{accept:".json",disableLabel:!0},on:{update:e.onUpdateFile}}),n("v-row",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",disabled:e.disableNext},on:{click:e.onNext}},[e._v("NEXT")])],1)],1):e._e(),e.workflow===e.enmWorkflow.EDITLANGUAGE?n("div",[n("h1",[e._v("Step 3 of 3: Edit the language file")]),n("v-switch",{attrs:{label:"Only show necessary translations"},model:{value:e.onlyShowNecessaryTranslations,callback:function(t){e.onlyShowNecessaryTranslations=t},expression:"onlyShowNecessaryTranslations"}}),e.editorData?n("div",{staticStyle:{"margin-top":"16px"}},e._l(Object.keys(e.editorData),(function(t){return n("v-row",{key:t,staticStyle:{margin:"0px"}},[e._l(e.countDots(t),(function(e){return n("div",{key:e,staticStyle:{width:"16px"}})})),"category"!==e.editorData[t]._type_||e.onlyShowNecessaryTranslations&&!e.editorData[t]._isNecessary_?e._e():n("div",{staticStyle:{"margin-bottom":"8px"}},[n("h3",[e._v(e._s(e.editorData[t]._value_))])]),"entry"!==e.editorData[t]._type_||e.onlyShowNecessaryTranslations&&!e.editorData[t]._isNecessary_?e._e():n("v-row",{staticStyle:{margin:"0px"}},[n("v-textarea",{staticStyle:{"margin-top":"8px"},attrs:{label:e.editorData[t]._reference_,value:e.editorData[t]._value_,"auto-grow":"",rows:"1"},on:{change:function(n){return e.onTextareaChange(e.editorData[t],n)}}})],1)],2)})),1):e._e()],1):e._e()])},c=[],s=n("1da1"),u=(n("ac1f"),n("466d"),n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"dropzone",staticClass:"dropzone",on:{dragover:function(e){e.preventDefault()},dragleave:e.dragleave,dragenter:e.dragenter,drop:e.drop}},[e.disableLabel?e._e():e._t("default",(function(){return[n("h1",[e._v(e._s(e.label||"Upload Box"))])]})),n("v-btn",{on:{click:function(t){return e.$refs.filebtn.click()}}},[n("v-icon",{attrs:{left:"",dark:""}},[e._v("mdi-cloud-upload")]),e._v(" Load ")],1),e.disableHint?e._e():n("p",[e._v("* you can also drag and drop files here")]),n("div",{staticClass:"input-container"},e._l(e.files,(function(t){return n("v-input",{key:t.name,attrs:{"append-icon":"mdi-close","prepend-icon":"mdi-insert-drive-file"},on:{"click:append":function(n){return e.remove(t)}}},[e._v(" "+e._s(t.name)+" ")])})),1),n("input",{ref:"filebtn",staticClass:"filebtn",attrs:{type:"file",multiple:e.multiple,accept:e.validatedAccept&&e.validatedAccept.extensions.concat(e.validatedAccept.mimetypes).join(",")},on:{input:e.upload}})],2)}),f=[],d=(n("a434"),n("d3b7"),n("d81d"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("4de4"),n("1276"),n("b0c0"),n("159b"),{data:function(){return{hoverCounter:0,hoveringContent:null,matchAnything:/.*/,files:[]}},props:["label","accept","multiple","disableLabel","disableHint"],watch:{multiple:function(e){e||this.files.splice(0,this.files.length-1)},hoveringContent:function(e){var t=this;if(e)if(this.accept&&this.accept.length&&0===this.validTypes.extensions.length){for(var n=!1,r=function(r){if(t.validTypes.mimetypes.reduce((function(t,n){return t||!!e[r].type.match(n)}),!1))return n=!0,"break"},a=0;a<e.length;a++){var i=r(a);if("break"===i)break}n&&(this.$refs.dropzone.style.backgroundColor="rgba(0, 0, 0, 0.25)")}else{for(var o=!1,l=0;l<e.length;l++)if("file"===e[l].kind){o=!0;break}o&&(this.$refs.dropzone.style.backgroundColor="rgba(0, 0, 0, 0.25)")}else this.$refs.dropzone.style.backgroundColor=""},hoverCounter:function(e){0===e&&(this.hoveringContent=null)}},computed:{validTypes:function(){return this.validatedAccept?{extensions:this.validatedAccept.extensions.map((function(e){return e.replace(/(\W)/g,"\\$1")})).map((function(e){return new RegExp("".concat(e,"$"),"i")})),mimetypes:this.validatedAccept.mimetypes.map((function(e){return e.replace(/([-+/])/g,"\\$1")})).map((function(e){return e.replace(/\*/g,"(?:[A-Za-z0-9\\-\\+]*)*")})).map((function(e){return new RegExp("^".concat(e,"$"))}))}:{extensions:[this.matchAnything],mimetypes:[this.matchAnything]}},validatedAccept:function(){return this.accept?{extensions:this.accept.split(",").filter((function(e){return e.match(/^\.(?!.*\/)/)})),mimetypes:this.accept.split(",").filter((function(e){return e.match(/^(?:(?:[A-Za-z0-9\-+]*)|\*)\/(?:(?:[A-Za-z0-9\-+]*)|\*)$/)}))}:null}},methods:{reset:function(){this.files=[],this.$refs.filebtn.value=""},upload:function(){for(var e=this,t=this.$refs.filebtn,n=t.files||{},r=function(t){e.multiple||e.files.splice(0,e.files.length);var r=e.validTypes.extensions.reduce((function(e,r){return e||!!n[t].name.match(r)}),!1)||e.validTypes.mimetypes.reduce((function(e,r){return e||!!n[t].type.match(r)}),!1);r&&e.files.push(n[t])},a=0;a<n.length;a++)r(a);this.$refs.filebtn.value="",this.$emit("update",this.files)},dragenter:function(e){this.hoveringContent=(e.dataTransfer||{}).items,this.hoverCounter++},dragleave:function(){this.hoverCounter--},drop:function(e){var t=this;e.preventDefault(),this.hoverCounter=0;var n=(e.dataTransfer||{}).items||[];if(n){for(var r=[],a=0;a<n.length;a++)if("file"===n[a].kind){var i=function(){if(n[a].webkitGetAsEntry){var e=n[a].webkitGetAsEntry();if(e.isDirectory)return r.push(e.name),"continue"}var i=n[a].getAsFile();if(!i)return"continue";var o=t.validTypes.extensions.reduce((function(e,t){return e||!!i.name.match(t)}),!1)||t.validTypes.mimetypes.reduce((function(e,t){return e||!!i.type.match(t)}),!1);if(!o)return r.push(i),"continue";t.multiple?t.files.filter((function(e){return e.name===i.name})).forEach((function(e){return t.files.splice(t.files.indexOf(e),1)})):t.files.splice(0,t.files.length),t.files.push(i)}();if("continue"===i)continue}r.length&&this.$emit("rejectedFiles",r)}this.$emit("update",this.files)},remove:function(e){var t=this.files;t.splice(t.indexOf(e),1),this.$emit("update",null)}}}),p=d,h=(n("9fc3"),n("2877")),_=Object(h["a"])(p,u,f,!1,null,"6409f62f",null),v=_.exports,g=n("53ca"),y=n("b85c");n("b64b"),n("caad"),n("2532"),n("d9e2"),n("99af");function m(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e)}))}function b(e){return e.replace(/_/g,".")}function w(e,t,n,r){console.group("flattenObject"),console.log("[flattenObject] sourceObject:",e),console.log("[flattenObject] referenceObject:",t),console.log("[flattenObject] targetObject:",n),console.log("[flattenObject] keyPrefix:",r);var a={containsNecessaryEntries:!1,flattenedObject:null};n||(n={});var i,o=Object(y["a"])(t?Object.keys(t):Object.keys(e));try{for(o.s();!(i=o.n()).done;){var l=i.value;if(l.includes("."))throw new Error("The key '".concat(l,"' contains dots, which is not allowed!"));var c=t?t[l]:null,s=e[l];if(t?"string"===typeof c:"string"===typeof s){var u=!s||c&&s!==c;u&&(a.containsNecessaryEntries=!0),n["".concat(r?r+".":"").concat(l)]={_type_:"entry",_value_:s,_reference_:c||b(l),_isNecessary_:u}}else{if(t?"object"!==Object(g["a"])(c):"object"!==Object(g["a"])(s))throw new Error("type not allowed:",t?Object(g["a"])(c):Object(g["a"])(s));var f={_type_:"category",_value_:l,_isNecessary_:!0};n["".concat(r?r+".":"").concat(l)]=f;var d=w(s,c,n,"".concat(r?r+".":"").concat(l));f._isNecessary_=d.containsNecessaryEntries,f._isNecessary_&&(a.containsNecessaryEntries=!0)}}}catch(p){o.e(p)}finally{o.f()}return console.groupEnd(),a.flattenedObject=n,a}var E={LOADLANGUAGEFILE:1,LOADREFERENCEFILE:2,EDITLANGUAGE:3},k={name:"LanguageEditor",components:{FileDrop:v},data:function(){return{workflow:E.LOADLANGUAGEFILE,onlyShowNecessaryTranslations:!1,languageFile:null,referenceFile:null,editorData:null,mockData:{global:{id:{_value_:"de",_reference_:"en"},lang:{_value_:"Deutsch",_reference_:"English"},idLocale:{_value_:"de-DE",_reference_:"en-EN"},generalHelpTextWithPhoneNumber:{_value_:"Bitte kontaktiere die Service Hotline {serviceHotline}, wenn Du Unterstützung benötigst.",_reference_:"Contact the service hotline at {serviceHotline} if you need assistance."}},authMethod:{pleaseSelectAuthMethod:{_value_:"Wie möchtest Du Dich anmelden?",_reference_:"How do you want to login?"},pin:{name:{_value_:"PIN",_reference_:"PIN"},caption:{_value_:"Anmelden um zu laden",_reference_:"Login to charge"}}}},mockDataFlat:{global:{_type_:"category",_value_:"global",_isNecessary_:!1},"global.id":{_type_:"entry",_value_:"de",_reference_:"en",_isNecessary_:!1},"global.lang":{_type_:"entry",_value_:"Deutsch",_reference_:"English",_isNecessary_:!1},"global.idLocale":{_type_:"entry",_value_:"de-DE",_reference_:"en-EN",_isNecessary_:!1},"global.generalHelpTextWithPhoneNumber":{_type_:"entry",_value_:"Bitte kontaktiere die Service Hotline {serviceHotline}, wenn Du Unterstützung benötigst.",_reference_:"Contact the service hotline at {serviceHotline} if you need assistance.",_isNecessary_:!1},authMethod:{_type_:"category",_value_:"authMethod",_isNecessary_:!0},"authMethod.pleaseSelectAuthMethod":{_type_:"entry",_value_:"Wie möchtest Du Dich anmelden?",_reference_:"How do you want to login?",_isNecessary_:!1},"authMethod.pin":{_type_:"category",_value_:"pin",_isNecessary_:!0},"authMethod.pin.name":{_type_:"entry",_value_:"PIN",_reference_:"PIN",_isNecessary_:!1},"authMethod.pin.caption":{_type_:"entry",_value_:"Anmelden um zu laden",_reference_:"Login to charge",_isNecessary_:!0}}}},computed:{enmWorkflow:function(){return E},disableNext:function(){return this.workflow===E.LOADLANGUAGEFILE&&!this.languageFile}},methods:{reset:function(){this.workflow=E.LOADLANGUAGEFILE,this.languageFile=null,this.referenceFile=null},onNext:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.workflow!==E.LOADLANGUAGEFILE){t.next=5;break}e.$refs.fileDrop.reset(),e.workflow=E.LOADREFERENCEFILE,t.next=8;break;case 5:if(e.workflow!==E.LOADREFERENCEFILE){t.next=8;break}return t.next=8,e.readFilesAndProvideEditor();case 8:case"end":return t.stop()}}),t)})))()},onUpdateFile:function(e){console.log("onUpdateFile files[0]:",e[0]),this.workflow===E.LOADLANGUAGEFILE&&(this.languageFile=e[0]),this.workflow===E.LOADREFERENCEFILE&&(this.referenceFile=e[0])},readFiles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("helpers:",r),t.next=3,m(e.languageFile);case 3:if(n=t.sent,!e.referenceFile){t.next=10;break}return t.next=7,m(e.referenceFile);case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=null;case 11:a=t.t0,console.log("languageContent:",n),console.log("referenceContent:",a),i=w(JSON.parse(n),JSON.parse(a)),e.editorData=i.flattenedObject;case 16:case"end":return t.stop()}}),t)})))()},countDots:function(e){return(e.match(/\./g)||[]).length},readFilesAndProvideEditor:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.readFiles();case 2:e.workflow=E.EDITLANGUAGE;case 3:case"end":return t.stop()}}),t)})))()},onTextareaChange:function(e,t){console.log("[onTextareaChange] item:",e),console.log("[onTextareaChange] value:",t),e._value_=t,console.log("[onTextareaChange] this.editorData:",this.editorData)}}},A=k,N=(n("dc01"),Object(h["a"])(A,l,c,!1,null,"35d63564",null)),x=N.exports,O={name:"App",components:{LanguageEditor:x},data:function(){return{}},methods:{onReset:function(){this.$refs.languageEditor.reset()}}},L=O,D=Object(h["a"])(L,i,o,!1,null,null,null),F=D.exports,j=n("ce5b"),T=n.n(j);n("bf40");a["default"].use(T.a);var C=new T.a({});n("e792"),n("d5e8"),n("5363");a["default"].config.productionTip=!1,new a["default"]({vuetify:C,render:function(e){return e(F)}}).$mount("#app")},"9fc3":function(e,t,n){"use strict";n("363a")},dc01:function(e,t,n){"use strict";n("fc24")},fc24:function(e,t,n){}});
//# sourceMappingURL=app.9a5b060f.js.map